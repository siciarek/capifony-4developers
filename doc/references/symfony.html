<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>9. Elementy specyficzne dla Symfony 2 &mdash; Wdrażanie (deployment) projektów Symfony2 przy pomocy Capifony 1.0 - dokumentacja</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="http://symfony.com/css/compiled/all.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="http://symfony.com/js/all.js"></script>
    <link rel="top" title="Wdrażanie (deployment) projektów Symfony2 przy pomocy Capifony 1.0 - dokumentacja" href="../index.html" />
    <link rel="next" title="10. Zdefiniowane zadania tasks i wyzwalacze triggers" href="tasks.html" />
    <link rel="prev" title="8. Ustawienie odpowiednich praw dostępu do katalogów" href="access.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Nawigacja</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Indeks ogólny"
             accesskey="I">indeks</a></li>
        <li class="right" >
          <a href="tasks.html" title="10. Zdefiniowane zadania tasks i wyzwalacze triggers"
             accesskey="N">dalej</a> |</li>
        <li class="right" >
          <a href="access.html" title="8. Ustawienie odpowiednich praw dostępu do katalogów"
             accesskey="P">wstecz</a> |</li>
        <li><a href="../index.html">Wdrażanie (deployment) projektów Symfony2 przy pomocy Capifony 1.0 - dokumentacja</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="elementy-specyficzne-dla-symfony-2">
<h1>9. Elementy specyficzne dla Symfony 2<a class="headerlink" href="#elementy-specyficzne-dla-symfony-2" title="Stały odnośnik do tego nagłówka">¶</a></h1>
<p>Nagłówek pliku konfiguracyjnego <tt class="docutils literal"><span class="pre">Capfile</span></tt> dla projektu <tt class="docutils literal"><span class="pre">Symfony</span> <span class="pre">2</span></tt></p>
<div class="highlight-ruby"><div class="highlight"><pre><span class="nb">load</span> <span class="s1">&#39;deploy&#39;</span> <span class="k">if</span> <span class="nb">respond_to?</span><span class="p">(</span><span class="ss">:namespace</span><span class="p">)</span> <span class="c1"># cap2 differentiator</span>

<span class="nb">require</span> <span class="s1">&#39;capifony_symfony2&#39;</span>
</pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>cap -vT
</pre></div>
</div>
<div class="section" id="komendy-capistrano">
<h2>9.1. Komendy <tt class="docutils literal"><span class="pre">capistrano</span></tt><a class="headerlink" href="#komendy-capistrano" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="highlight-none"><div class="highlight"><pre>cap deploy                                  # Deploys your project.
cap deploy:check                            # Test deployment dependencies.
cap deploy:cleanup                          # Clean up old releases.
cap deploy:cold                             # Deploys and starts a `cold&#39; app...
cap deploy:create_symlink                   # Updates the symlink to the most...
cap deploy:drop                             # Drops :deploy_to directory
cap deploy:finalize_update                  # Updates latest release source path
cap deploy:migrate                          # Runs the Symfony2 migrations
cap deploy:migrations                       # Deploy and run pending migrations.
cap deploy:pending                          # Displays the commits since your...
cap deploy:pending:diff                     # Displays the `diff&#39; since your ...
cap deploy:restart                          # Blank task exists as a hook int...
cap deploy:rollback                         # Rolls back to a previous versio...
cap deploy:rollback:cleanup                 # [internal] Removes the most rec...
cap deploy:rollback:code                    # Rolls back to the previously de...
cap deploy:rollback:revision                # [internal] Points the current s...
cap deploy:set_permissions                  # Sets permissions for writable_d...
cap deploy:setup                            # Prepares one or more servers fo...
cap deploy:share_childs                     # Symlinks static directories and...
cap deploy:start                            # Blank task exists as a hook int...
cap deploy:stop                             # Blank task exists as a hook int...
cap deploy:symlink                          # Deprecated API.
cap deploy:test_all                         # Deploys the application and run...
cap deploy:update                           # Copies your project and updates...
cap deploy:update_code                      # Copies your project to the remo...
cap deploy:upload                           # Copy files to the currently dep...
cap deploy:web:disable                      # Present a maintenance page to v...
cap deploy:web:enable                       # Makes the application web-acces...
cap invoke                                  # Invoke a single command on the ...
cap shared:folder:download                  # Downloads a backup of the share...
cap shell                                   # Begin an interactive Capistrano...
</pre></div>
</div>
</div>
<div class="section" id="komendy-dotyczace-bazy-danych">
<h2>9.2. Komendy dotyczące bazy danych<a class="headerlink" href="#komendy-dotyczace-bazy-danych" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="highlight-none"><div class="highlight"><pre>cap database:dump:local                     # Dumps local database
cap database:dump:remote                    # Dumps remote database
cap database:move:to_local                  # Dumps remote database, download...
cap database:move:to_remote                 # Dumps local database, loads it ...
</pre></div>
</div>
</div>
<div class="section" id="komendy-composera">
<h2>9.3. Komendy <tt class="docutils literal"><span class="pre">composera</span></tt><a class="headerlink" href="#komendy-composera" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="highlight-none"><div class="highlight"><pre>cap symfony:composer:copy_vendors           #
cap symfony:composer:dump_autoload          # Dumps an optimized autoloader
cap symfony:composer:dump_autoload_temp     # Dumps an optimized autoloader
cap symfony:composer:get                    # Gets composer and installs it
cap symfony:composer:install                # Runs composer to install vendor...
cap symfony:composer:update                 # Runs composer to update vendors...
</pre></div>
</div>
</div>
<div class="section" id="komendy-symfony-2">
<h2>9.4. Komendy <tt class="docutils literal"><span class="pre">Symfony</span> <span class="pre">2</span></tt><a class="headerlink" href="#komendy-symfony-2" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="highlight-none"><div class="highlight"><pre>cap symfony                                 # Runs custom symfony command

cap symfony:assetic:dump                    # Dumps all assets to the filesystem
cap symfony:assets:install                  # Installs bundle&#39;s assets
cap symfony:assets:update_version           # Updates assets version (in conf...

cap symfony:bootstrap:build                 # Runs the bin/build_bootstrap sc...
cap symfony:cache:clear                     # Cache clear
cap symfony:cache:warmup                    # Cache warmup

cap symfony:project:clear_controllers       # Clears all non production envir...
</pre></div>
</div>
</div>
<div class="section" id="komendy-doctrine">
<h2>9.5. Komendy <tt class="docutils literal"><span class="pre">Doctrine</span></tt><a class="headerlink" href="#komendy-doctrine" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="highlight-none"><div class="highlight"><pre>cap symfony:doctrine:cache:clear_metadata   # Clears all metadata cache for a...
cap symfony:doctrine:cache:clear_query      # Clears all query cache for a en...
cap symfony:doctrine:cache:clear_result     # Clears result cache for a entit...
cap symfony:doctrine:database:create        # Creates the configured databases
cap symfony:doctrine:database:drop          # Drops the configured databases
cap symfony:doctrine:init:acl               # Mounts ACL tables in the database
cap symfony:doctrine:load_fixtures          # Load data fixtures
cap symfony:doctrine:migrations:migrate     # Executes a migration to a speci...
cap symfony:doctrine:migrations:status      # Views the status of a set of mi...

cap symfony:doctrine:mongodb:indexes:create # Allows you to create indexes *o...
cap symfony:doctrine:mongodb:indexes:drop   # Allows you to drop indexes *onl...
cap symfony:doctrine:mongodb:schema:create  # Allows you to create databases,...
cap symfony:doctrine:mongodb:schema:drop    # Allows you to drop databases, c...
cap symfony:doctrine:mongodb:schema:update  # Allows you to update databases,...
cap symfony:doctrine:schema:create          # Processes the schema and either...
cap symfony:doctrine:schema:drop            # Drops the complete database sch...
cap symfony:doctrine:schema:update          # Updates database schema of Enti...
</pre></div>
</div>
</div>
<div class="section" id="komendy-propel">
<h2>9.6. Komendy <tt class="docutils literal"><span class="pre">Propel</span></tt><a class="headerlink" href="#komendy-propel" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="highlight-none"><div class="highlight"><pre>cap symfony:propel:build:acl                # Generates ACLs models
cap symfony:propel:build:acl_load           # Inserts propel ACL tables
cap symfony:propel:build:all_and_load       # Builds the Model classes, SQL s...
cap symfony:propel:build:model              # Builds the Model classes
cap symfony:propel:build:sql                # Builds SQL statements
cap symfony:propel:build:sql_load           # Inserts SQL statements
cap symfony:propel:database:create          # Creates the configured databases
cap symfony:propel:database:drop            # Drops the configured databases
</pre></div>
</div>
</div>
<div class="section" id="komendy-bin-vendors">
<h2>9.7. Komendy <tt class="docutils literal"><span class="pre">bin/vendors</span></tt><a class="headerlink" href="#komendy-bin-vendors" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="highlight-none"><div class="highlight"><pre>cap symfony:vendors:install                 # Runs the bin/vendors script to ...
cap symfony:vendors:reinstall               # Runs the bin/vendors script to ...
cap symfony:vendors:upgrade                 # Runs the bin/vendors script to ...
</pre></div>
</div>
</div>
<div class="section" id="komendy-przegladania-logow">
<h2>9.8. Komendy przeglądania logów<a class="headerlink" href="#komendy-przegladania-logow" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="highlight-none"><div class="highlight"><pre>cap symfony:logs:tail                       # Tail prod.log
cap symfony:logs:tail_dev                   # Tail dev.log
</pre></div>
</div>
</div>
<div class="section" id="uwagi">
<h2>9.9. Uwagi<a class="headerlink" href="#uwagi" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<p>Przy komendach <tt class="docutils literal"><span class="pre">symfony</span></tt> innych niż zdefiniowane np. <tt class="docutils literal"><span class="pre">fos:js-routing:dump</span></tt> pojawia się zapytanie</p>
<div class="highlight-none"><div class="highlight"><pre>$ cap symfony
  * 2014-04-05 21:02:37 executing `symfony&#39;
task_arguments [cache:clear] :
</pre></div>
</div>
<p>aby tego uniknąć, kiedy np. chcemu użyć komendy w skrypcie, musimy przekierować komendę na <tt class="docutils literal"><span class="pre">STDIN</span></tt>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">echo </span>fos:js-routing:dump | cap symfony
</pre></div>
</div>
<p>Zastosowanie w pliku konfiguracyjnym <tt class="docutils literal"><span class="pre">ant</span></tt></p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;fosjs&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;exec</span> <span class="na">executable=</span><span class="s">&quot;bash&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">line=</span><span class="s">&quot;-c &amp;quot;echo fos:js-routing:dump | cap symfony&amp;quot;&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/exec&gt;</span>
<span class="nt">&lt;/target&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="ustawienia-konfiguracyjne-composera">
<h2>9.10. Ustawienia konfiguracyjne <tt class="docutils literal"><span class="pre">composera</span></tt><a class="headerlink" href="#ustawienia-konfiguracyjne-composera" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">set</span> <span class="ss">:use_composer</span><span class="p">,</span>        <span class="kp">true</span>
<span class="c1"># set :composer_bin,       &quot;/home/usync/bin/composer&quot;</span>
<span class="n">set</span> <span class="ss">:interactive_mode</span><span class="p">,</span>    <span class="kp">false</span>
</pre></div>
</div>
</div>
<div class="section" id="ustawienia-konfiguracyjne-specyficzne-dla-symfony">
<h2>9.11. Ustawienia konfiguracyjne specyficzne dla <tt class="docutils literal"><span class="pre">Symfony</span></tt><a class="headerlink" href="#ustawienia-konfiguracyjne-specyficzne-dla-symfony" title="Stały odnośnik do tego nagłówka">¶</a></h2>
<div class="highlight-ruby"><div class="highlight"><pre><span class="n">set</span> <span class="ss">:model_manager</span><span class="p">,</span>       <span class="s2">&quot;doctrine&quot;</span> <span class="c1"># Or: &quot;propel&quot;</span>
<span class="n">set</span> <span class="ss">:shared_files</span><span class="p">,</span>        <span class="o">[</span> <span class="s2">&quot;app/config/parameters.yml&quot;</span><span class="p">,</span> <span class="s2">&quot;build.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;properties.cnf&quot;</span><span class="p">,</span> <span class="s2">&quot;web/app.php&quot;</span> <span class="o">]</span>
<span class="n">set</span> <span class="ss">:shared_children</span><span class="p">,</span>     <span class="o">[</span> <span class="n">log_path</span><span class="p">,</span> <span class="n">web_path</span> <span class="o">+</span> <span class="s2">&quot;/uploads&quot;</span><span class="p">,</span> <span class="s2">&quot;vendor&quot;</span> <span class="o">]</span>

<span class="n">set</span> <span class="ss">:update_vendors</span><span class="p">,</span>      <span class="kp">true</span>
<span class="n">set</span> <span class="ss">:dump_assetic_assets</span><span class="p">,</span> <span class="kp">true</span>
<span class="n">set</span> <span class="ss">:assets_symlinks</span><span class="p">,</span>     <span class="kp">true</span>
</pre></div>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Nawigacja</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Indeks ogólny"
             >indeks</a></li>
        <li class="right" >
          <a href="tasks.html" title="10. Zdefiniowane zadania tasks i wyzwalacze triggers"
             >dalej</a> |</li>
        <li class="right" >
          <a href="access.html" title="8. Ustawienie odpowiednich praw dostępu do katalogów"
             >wstecz</a> |</li>
        <li><a href="../index.html">Wdrażanie (deployment) projektów Symfony2 przy pomocy Capifony 1.0 - dokumentacja</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Jacek Siciarek.
      Utworzone przy pomocy <a href="http://sphinx-doc.org/">Sphinx</a>'a 1.2b3.
    </div>
  </body>
</html>